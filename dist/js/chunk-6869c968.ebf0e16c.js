(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6869c968"],{"4ba2":function(t,e,r){var s=r("2ea2"),i=r("2f77"),a=r("69b3"),n=r("e7ad").Reflect;t.exports=n&&n.ownKeys||function(t){var e=s.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},"57f7":function(t,e,r){var s=r("35f4");s(s.S+s.F*!r("ecc6"),"Object",{defineProperty:r("2d81").f})},"5ab2":function(t,e,r){var s=r("e46b"),i=r("4ba2"),a=r("09b9"),n=r("dcb7"),o=r("ebc3");s(s.S,"Object",{getOwnPropertyDescriptors:function(t){var e,r,s=a(t),c=n.f,u=i(s),d={},l=0;while(u.length>l)r=c(s,e=u[l++]),void 0!==r&&o(d,e,r);return d}})},"6d57":function(t,e,r){for(var s=r("e44b"),i=r("80a9"),a=r("bf16"),n=r("e7ad"),o=r("86d4"),c=r("da6d"),u=r("cb3d"),d=u("iterator"),l=u("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),m=0;m<h.length;m++){var g,v=h[m],b=f[v],y=n[v],_=y&&y.prototype;if(_&&(_[d]||o(_,d,p),_[l]||o(_,l,v),c[v]=p,b))for(g in s)_[g]||a(_,g,s[g],!0)}},"80df":function(t,e,r){r("57f7");var s=r("734d").Object;t.exports=function(t,e,r){return s.defineProperty(t,e,r)}},"85f2":function(t,e,r){t.exports=r("80df")},"9ba4":function(t,e,r){},bb11:function(t,e,r){"use strict";var s=r("9ba4"),i=r.n(s);i.a},bd86:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var s=r("85f2"),i=r.n(s);function a(t,e,r){return e in t?i()(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},e10e:function(t,e,r){var s=r("008a"),i=r("80a9");r("f0cc")("keys",(function(){return function(t){return i(s(t))}}))},e3a5:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[2==t.type?r("div",[t.address?r("router-link",{attrs:{to:{name:"address_list"}}},[r("div",{staticClass:"address"},[r("img",{attrs:{src:"img/icon-dingwei.png",alt:""}}),r("div",{staticClass:"fz-15 ml-10 c3",staticStyle:{width:"80%"}},[r("div",[t._v(t._s(t.address.name)+" "+t._s(t.address.phone))]),r("div",{staticClass:"text-hide"},[t._v(t._s(t.address.province)+t._s(t.address.city)+t._s(t.address.area)+t._s(t.address.address))])]),r("van-icon",{attrs:{name:"arrow",size:"15px",color:"#999"}})],1)]):r("div",{staticClass:"address"},[r("router-link",{attrs:{to:{name:"address_edit"}}},[r("div",{staticClass:"fz-16 c6"},[r("span",[t._v("暂无地址，请去")]),r("span",{staticClass:"text-price"},[t._v("添加地址")])])])],1),r("div",{staticClass:"bar-10"})],1):t._e(),t._l(t.list,(function(e){return r("div",{staticClass:"goods-item"},[r("img",{attrs:{src:e.with_goods.image,alt:""}}),r("div",{staticClass:"ml-10 flex flex-column flex-jus",staticStyle:{flex:"1"}},[r("div",{staticClass:"fz-15 c3"},[t._v(t._s(e.with_goods.title))]),e.with_format_price?r("div",{staticClass:"fz-11 c9"},[t._v(t._s(e.with_format_price.format))]):t._e(),r("div",{staticClass:"flex flex-jus flex-align-end"},[r("div",{staticClass:"fz-15 c3"},[t._v("¥"+t._s(e.with_format_price?e.with_format_price.price:e.with_goods.price))]),r("van-stepper",{attrs:{integer:""},on:{change:t.sumPriceEvent},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"item.quantity"}})],1)])])})),r("van-cell",{attrs:{border:!1,title:"留言"}}),r("div",{staticClass:"plr-10"},[r("van-field",{attrs:{placeholder:"给卖家留言～～"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),r("div",{staticClass:"footer-bar"},[r("div",[r("span",{staticClass:"fz-15 c9"},[t._v("合计：")]),r("span",{staticClass:"fz-15 text-price"},[t._v("￥"+t._s(t.sumPrice))])]),r("div",{staticClass:"btn-youya",on:{click:t.submit}},[t._v("提交订单")])])],2)},i=[],a=(r("5ab2"),r("e10e"),r("163d"),r("bd86")),n=(r("96cf"),r("3b8d")),o=(r("6d57"),r("18a0")),c=r.n(o);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=!0,p={components:{},props:{},data:function(){return{isSingle:!1,singleGoods:{},address:"",value:1,message:"",type:"2",list:[],goods:[],order_id:"",sumPrice:0}},watch:{},computed:{},methods:{sumPriceEvent:function(){var t=0;this.list.length?(this.list.forEach((function(e){t=100*parseFloat(e.with_format_price?e.with_format_price.price:e.with_goods.price)*e.quantity/100+t})),this.sumPrice=t):this.sumPrice=0},getGoods:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,r){var s,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"加载中..."}),t.next=3,axios.get("/mall/detail?id=".concat(e));case 3:s=t.sent,i=s.code,a=s.data,n=s.message,0==i?(this.$toast.clear(),this.list[r]=d({},this.list[r],{},a),this.sumPriceEvent()):this.$toast.fail(n);case 8:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),getAddress:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/user/address-first");case 2:e=t.sent,r=e.code,s=e.data,e.message,0==r&&(this.address=s);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),submit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,s,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],this.list.forEach((function(t,r){var s={goods_id:t.goods_id,quantity:t.quantity};t.price_id&&(s.price_id=t.price_id),e.push(s)})),this.$toast.loading({message:"提交中..."}),r={type:this.type,goods:JSON.stringify(e)},this.$route.query.share_id&&"undefined"!=this.$route.query.share_id&&(r.share_id=this.$route.query.share_id),2!=r.type){t.next=12;break}if(!this.address){t.next=10;break}r.address_id=this.address.id,t.next=12;break;case 10:return this.$toast.fail("请选择地址"),t.abrupt("return");case 12:return t.next=14,axios.post("/user/mall-order",r);case 14:s=t.sent,i=s.code,a=s.data,n=s.message,0==i?(this.$toast.clear(),this.order_id=a.id,this.$store.commit("setCreateOrderGoodsList",[]),1==a.status?(this.$toast.success("支付成功"),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):l?this.payed(a.id):this.pay(a.id)):this.$toast.fail(n||"下单失败，请联系客服！");case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),payed:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"支付中..."}),t.next=3,axios.post("/user/mall-order/payed",{order_id:e});case 3:r=t.sent,s=r.code,i=r.data,a=r.message,0==s?(this.$toast.clear(),console.log(i),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.$toast.fail(a);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getSDK:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=encodeURIComponent(window.location.href),t.next=3,axios.get("/config/jsjdk?url="+e);case 3:r=t.sent,s=r.data,i=r.code,r.message,0==i&&c.a.config({debug:!1,appId:s.appId,timestamp:Number(s.timestamp),nonceStr:s.nonceStr,signature:s.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),pay:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,s,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/user/mall-order/pay?order_id="+e);case 2:r=t.sent,s=r.data,i=r.code,r.message,0==i&&c.a.chooseWXPay({appId:s.appId,timestamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(t){a.$toast.success("支付成功"),a.$router.push({name:"goods_pay_feedback",query:{order_id:a.order_id}})},fail:function(t){a.$toast.fail("支付失败")}});case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.list=this.$store.state.createOrderGoodsList,0==this.list.length&&this.$router.go(-1),this.sumPriceEvent(),this.getSDK(),this.type=this.$route.query.type||2,2==this.type&&this.getAddress()},mounted:function(){}},f=p,h=(r("bb11"),r("2877")),m=Object(h["a"])(f,s,i,!1,null,"0100b965",null);e["default"]=m.exports},ebc3:function(t,e,r){"use strict";var s=r("064e"),i=r("cc33");t.exports=function(t,e,r){e in t?s.f(t,e,i(0,r)):t[e]=r}},f0cc:function(t,e,r){var s=r("e46b"),i=r("7ddc"),a=r("238a");t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],n={};n[t]=e(r),s(s.S+s.F*a((function(){r(1)})),"Object",n)}}}]);
//# sourceMappingURL=chunk-6869c968.ebf0e16c.js.map