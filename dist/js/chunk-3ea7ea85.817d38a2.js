(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea7ea85"],{"2d9a":function(e,t,r){"use strict";var s=r("792e"),i=r.n(s);i.a},"4ba2":function(e,t,r){var s=r("2ea2"),i=r("2f77"),a=r("69b3"),n=r("e7ad").Reflect;e.exports=n&&n.ownKeys||function(e){var t=s.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},"57f7":function(e,t,r){var s=r("35f4");s(s.S+s.F*!r("ecc6"),"Object",{defineProperty:r("2d81").f})},"5ab2":function(e,t,r){var s=r("e46b"),i=r("4ba2"),a=r("09b9"),n=r("dcb7"),o=r("ebc3");s(s.S,"Object",{getOwnPropertyDescriptors:function(e){var t,r,s=a(e),c=n.f,u=i(s),d={},l=0;while(u.length>l)r=c(s,t=u[l++]),void 0!==r&&o(d,t,r);return d}})},"6d57":function(e,t,r){for(var s=r("e44b"),i=r("80a9"),a=r("bf16"),n=r("e7ad"),o=r("86d4"),c=r("da6d"),u=r("cb3d"),d=u("iterator"),l=u("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),m=0;m<h.length;m++){var g,v=h[m],y=f[v],_=n[v],b=_&&_.prototype;if(b&&(b[d]||o(b,d,p),b[l]||o(b,l,v),c[v]=p,y))for(g in s)b[g]||a(b,g,s[g],!0)}},"792e":function(e,t,r){},"80df":function(e,t,r){r("57f7");var s=r("734d").Object;e.exports=function(e,t,r){return s.defineProperty(e,t,r)}},"85f2":function(e,t,r){e.exports=r("80df")},bd86:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("85f2"),i=r.n(s);function a(e,t,r){return t in e?i()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},e10e:function(e,t,r){var s=r("008a"),i=r("80a9");r("f0cc")("keys",(function(){return function(e){return i(s(e))}}))},e3a5:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[2==e.type?r("div",[e.address?r("router-link",{attrs:{to:{name:"address_list"}}},[r("div",{staticClass:"address"},[r("img",{attrs:{src:"img/icon-dingwei.png",alt:""}}),r("div",{staticClass:"fz-15 ml-10 c3",staticStyle:{width:"80%"}},[r("div",[e._v(e._s(e.address.name)+" "+e._s(e.address.phone))]),r("div",{staticClass:"text-hide"},[e._v(e._s(e.address.province)+e._s(e.address.city)+e._s(e.address.area)+e._s(e.address.address))])]),r("van-icon",{attrs:{name:"arrow",size:"15px",color:"#999"}})],1)]):r("div",{staticClass:"address"},[r("router-link",{attrs:{to:{name:"address_edit"}}},[r("div",{staticClass:"fz-16 c6"},[r("span",[e._v("暂无地址，请去")]),r("span",{staticClass:"text-price"},[e._v("添加地址")])])])],1),r("div",{staticClass:"bar-10"})],1):e._e(),e._l(e.list,(function(t){return r("div",{staticClass:"goods-item"},[r("img",{attrs:{src:t.with_goods.image,alt:""}}),r("div",{staticClass:"ml-10 flex flex-column flex-jus",staticStyle:{flex:"1"}},[r("div",{staticClass:"fz-15 c3"},[e._v(e._s(t.with_goods.title))]),t.with_format_price?r("div",{staticClass:"fz-11 c9"},[e._v(e._s(t.with_format_price.format))]):e._e(),r("div",{staticClass:"flex flex-jus flex-align-end"},[r("div",{staticClass:"fz-15 c3"},[e._v("¥"+e._s(t.with_format_price?t.with_format_price.price:t.with_goods.price))]),r("van-stepper",{attrs:{integer:""},on:{change:e.sumPriceEvent},model:{value:t.quantity,callback:function(r){e.$set(t,"quantity",r)},expression:"item.quantity"}})],1)])])})),r("van-cell",{attrs:{border:!1,title:"留言"}}),r("div",{staticClass:"plr-10"},[r("van-field",{attrs:{placeholder:"给卖家留言～～"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),r("div",{staticClass:"footer-bar"},[r("div",[r("span",{staticClass:"fz-15 c9"},[e._v("合计：")]),r("span",{staticClass:"fz-15 text-price"},[e._v("￥"+e._s(e.sumPrice))])]),r("div",{staticClass:"btn-youya",on:{click:e.submit}},[e._v("提交订单")])])],2)},i=[],a=(r("5ab2"),r("e10e"),r("163d"),r("bd86")),n=(r("96cf"),r("3b8d")),o=(r("6d57"),r("18a0")),c=r.n(o);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=!1,p={components:{},props:{},data:function(){return{isSingle:!1,singleGoods:{},address:"",value:1,message:"",type:"2",list:[],goods:[],order_id:"",sumPrice:0}},watch:{},computed:{},methods:{sumPriceEvent:function(){var e=0;this.list.length?(this.list.forEach((function(t){e=100*parseFloat(t.with_format_price?t.with_format_price.price:t.with_goods.price)*t.quantity/100+e})),this.sumPrice=e):this.sumPrice=0},getGoods:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"加载中..."}),e.next=3,axios.get("/mall/detail?id=".concat(t));case 3:s=e.sent,i=s.code,a=s.data,n=s.message,0==i?(this.$toast.clear(),this.list[r]=d({},this.list[r],{},a),this.sumPriceEvent()):this.$toast.fail(n);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),getAddress:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/address-first");case 2:t=e.sent,r=t.code,s=t.data,t.message,0==r&&(this.address=s);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.list.forEach((function(e,r){var s={goods_id:e.goods_id,quantity:e.quantity};e.price_id&&(s.price_id=e.price_id),t.push(s)})),this.$toast.loading({message:"提交中..."}),r={type:this.type,goods:JSON.stringify(t)},this.$route.query.share_id&&"undefined"!=this.$route.query.share_id&&(r.share_id=this.$route.query.share_id),2!=r.type){e.next=12;break}if(!this.address){e.next=10;break}r.address_id=this.address.id,e.next=12;break;case 10:return this.$toast.fail("请选择地址"),e.abrupt("return");case 12:return e.next=14,axios.post("/user/mall-order",r);case 14:s=e.sent,i=s.code,a=s.data,n=s.message,0==i?(this.$toast.clear(),this.order_id=a.id,this.$store.commit("setCreateOrderGoodsList",[]),1==a.status?(this.$toast.success("支付成功"),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):l?this.payed(a.id):this.pay(a.id)):this.$toast.fail(n||"下单失败，请联系客服！");case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),payed:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"支付中..."}),e.next=3,axios.post("/user/mall-order/payed",{order_id:t});case 3:r=e.sent,s=r.code,i=r.data,a=r.message,0==s?(this.$toast.clear(),console.log(i),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.$toast.fail(a);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSDK:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=encodeURIComponent(window.location.href),e.next=3,axios.get("/config/jsjdk?url="+t);case 3:r=e.sent,s=r.data,i=r.code,r.message,0==i&&c.a.config({debug:!1,appId:s.appId,timestamp:Number(s.timestamp),nonceStr:s.nonceStr,signature:s.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),pay:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,s,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/mall-order/pay?order_id="+t);case 2:r=e.sent,s=r.data,i=r.code,r.message,0==i&&c.a.chooseWXPay({appId:s.appId,timestamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(e){a.$toast.success("支付成功"),a.$router.push({name:"goods_pay_feedback",query:{order_id:a.order_id}})},fail:function(e){a.$toast.fail("支付失败")}});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){this.list=this.$store.state.createOrderGoodsList,0==this.list.length&&this.$router.go(-1),this.sumPriceEvent(),this.getSDK(),this.type=this.$route.query.type||2,2==this.type&&this.getAddress()},mounted:function(){}},f=p,h=(r("2d9a"),r("2877")),m=Object(h["a"])(f,s,i,!1,null,"4d6fe854",null);t["default"]=m.exports},ebc3:function(e,t,r){"use strict";var s=r("064e"),i=r("cc33");e.exports=function(e,t,r){t in e?s.f(e,t,i(0,r)):e[t]=r}},f0cc:function(e,t,r){var s=r("e46b"),i=r("7ddc"),a=r("238a");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],n={};n[e]=t(r),s(s.S+s.F*a((function(){r(1)})),"Object",n)}}}]);
//# sourceMappingURL=chunk-3ea7ea85.817d38a2.js.map