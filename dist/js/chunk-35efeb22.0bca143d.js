(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35efeb22"],{"7d7d":function(e,t,a){"use strict";var s=a("a375"),n=a.n(s);n.a},a375:function(e,t,a){},ed49:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-15"},[a("div",{staticClass:"catalogue"},[a("div",{staticClass:"thumb",style:{backgroundImage:"url("+e.detail.image+")"}},[a("div",{staticClass:"duration"},[e._v("全部"+e._s(e.detail.period)+"集")])]),a("div",{staticClass:"title"},[a("div",{staticClass:"fz-16 c3"},[e._v(e._s(e.detail.name))]),a("div",{staticClass:"fz-16 text-price"},[e._v("¥"+e._s(e.detail.price))])])]),a("ul",{staticClass:"cell-group"},[e._m(0),a("li",{staticClass:"cell"},[a("div",{staticClass:"cell__title"},[e._v("商品金额")]),a("div",{staticClass:"cell__value"},[e._v("￥"+e._s(e.detail.price))])])]),a("footer",{staticClass:"footer-bar flex flex-align-center"},[e._m(1),a("div",{staticClass:"price"},[a("span",{staticClass:"fz-15 text-price fw-700"},[e._v("¥"+e._s(e._f("toF")(e.detail.price-(e.coupon.amount||0))))])]),a("div",{staticClass:"btn-youya",on:{click:e.submitOrder}},[e._v("去支付")])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"cell"},[a("div",{staticClass:"cell__title"},[e._v("支付方式")]),a("div",{staticClass:"cell__value"},[e._v("微信支付")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tips"},[a("span",{staticClass:"text-price"},[e._v("*")]),e._v("温馨提示：课程售出后，不支持退款哦\n    ")])}],i=(a("163d"),a("96cf"),a("3b8d")),r=a("18a0"),o=a.n(r),c={components:{},props:{},data:function(){return{couponCode:"",discounts:!1,isShowCouponModel:!1,detail:{},coupon:{},loading:!1}},watch:{},computed:{},methods:{showCouponModel:function(){this.isShowCouponModel=!0},hideCouponModel:function(){this.isShowCouponModel=!1},getCouponCode:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.couponCode){e.next=3;break}return this.$toast("请输入优惠码"),e.abrupt("return");case 3:return this.$toast.loading({message:"加载中..."}),e.next=6,window.axios.get("/user/course-order/code?code=".concat(this.couponCode));case 6:t=e.sent,a=t.code,s=t.data,n=t.message,this.isShowCouponModel=!1,this.$toast.clear(),0==a?(this.coupon=s,this.discounts=!0):this.$toast(n);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"加载中..."}),e.next=3,window.axios.get("/live/goods-detail",{params:{goods_id:this.$route.query.id}});case 3:t=e.sent,a=t.code,s=t.data,n=t.message,0==a?(this.$toast.clear(),this.detail=s):this.$toast.fail(n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitOrder:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"加载中..."}),t={},t.goods_id=this.$route.query.id,this.$route.query.share_id&&"undefined"!=this.$route.query.share_id&&(t.share_id=this.$route.query.share_id),e.next=6,window.axios.post("/user/live/order",t);case 6:a=e.sent,s=a.code,n=a.data,i=a.message,0==s?(this.$toast.clear(),1==n.status?(this.$toast.success("支付成功"),this.getDetail(n.id)):this.payed(n.id)):this.$toast.fail(i||"下单失败，请联系客服！");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.axios.get("/user/live/order-detail",{params:{order_id:t}});case 2:a=e.sent,s=a.code,n=a.data,i=a.message,0==s?(window.console.log(n),window.location.href=n.code_url):window.console.log(i);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),payed:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.next=5,window.axios.post("/user/live/order-payed",{order_id:t});case 5:a=e.sent,s=a.code,n=a.message,this.loading=!1,0==s?(this.$toast.success("支付成功"),this.getDetail(t)):this.$toast.fail(n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),pay:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,s,n,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.axios.get("/user/live/order-pay?order_id="+t);case 2:a=e.sent,s=a.data,n=a.code,i=a.message,0==n?o.a.chooseWXPay({timestamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(e){r.$toast.success("支付成功"),r.getDetail(t)},fail:function(e){r.$toast.fail("支付失败")}}):this.$toast.fail(i);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSDK:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=encodeURIComponent(window.location.href),e.next=3,window.axios.get("/config/jsjdk?url="+t);case 3:a=e.sent,s=a.data,n=a.code,a.message,0==n&&o.a.config({debug:!1,appId:s.appId,timestamp:Number(s.timestamp),nonceStr:s.nonceStr,signature:s.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getData(),this.getSDK()},mounted:function(){},filters:{toF:function(e){var t=Number(e);return isNaN(t)?"错误参数":t<0?"0.00":t.toFixed(2)}}},u=c,d=(a("7d7d"),a("2877")),l=Object(d["a"])(u,s,n,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-35efeb22.0bca143d.js.map