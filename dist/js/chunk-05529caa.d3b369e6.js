(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05529caa"],{3037:function(t,e,s){},"456d":function(t,e,s){var r=s("4bf8"),a=s("0d58");s("5eda")("keys",(function(){return function(t){return a(r(t))}}))},"5eda":function(t,e,s){var r=s("5ca1"),a=s("8378"),i=s("79e5");t.exports=function(t,e){var s=(a.Object||{})[t]||Object[t],n={};n[t]=e(s),r(r.S+r.F*i((function(){s(1)})),"Object",n)}},"6a56":function(t,e,s){"use strict";var r=s("3037"),a=s.n(r);a.a},"8e6e":function(t,e,s){var r=s("5ca1"),a=s("990b"),i=s("6821"),n=s("11e9"),o=s("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,r=i(t),c=n.f,u=a(r),d={},l=0;while(u.length>l)s=c(r,e=u[l++]),void 0!==s&&o(d,e,s);return d}})},"990b":function(t,e,s){var r=s("9093"),a=s("2621"),i=s("cb7c"),n=s("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=r.f(i(t)),s=a.f;return s?e.concat(s(t)):e}},ac6a:function(t,e,s){for(var r=s("cadf"),a=s("0d58"),i=s("2aba"),n=s("7726"),o=s("32e9"),c=s("84f2"),u=s("2b4c"),d=u("iterator"),l=u("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(f),g=0;g<h.length;g++){var m,v=h[g],y=f[v],b=n[v],_=b&&b.prototype;if(_&&(_[d]||o(_,d,p),_[l]||o(_,l,v),c[v]=p,y))for(m in r)_[m]||i(_,m,r[m],!0)}},ade3:function(t,e,s){"use strict";function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return r}))},e3a5:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[2==t.type?s("div",[t.address?s("router-link",{attrs:{to:{name:"address_list"}}},[s("div",{staticClass:"address"},[s("img",{attrs:{src:"img/icon-dingwei.png",alt:""}}),s("div",{staticClass:"fz-15 ml-10 c3",staticStyle:{width:"80%"}},[s("div",[t._v(t._s(t.address.name)+" "+t._s(t.address.phone))]),s("div",{staticClass:"text-hide"},[t._v(t._s(t.address.province)+t._s(t.address.city)+t._s(t.address.area)+t._s(t.address.address))])]),s("van-icon",{attrs:{name:"arrow",size:"15px",color:"#999"}})],1)]):s("div",{staticClass:"address"},[s("router-link",{attrs:{to:{name:"address_edit"}}},[s("div",{staticClass:"fz-16 c6"},[s("span",[t._v("暂无地址，请去")]),s("span",{staticClass:"text-price"},[t._v("添加地址")])])])],1),s("div",{staticClass:"bar-10"})],1):t._e(),t._l(t.list,(function(e){return s("div",{staticClass:"goods-item"},[s("img",{attrs:{src:e.image,alt:""}}),s("div",{staticClass:"ml-10 flex flex-column flex-jus",staticStyle:{flex:"1"}},[s("div",{staticClass:"fz-15 c3"},[t._v(t._s(e.title))]),s("div",{staticClass:"flex flex-jus flex-align-end"},[s("div",{staticClass:"fz-15 c3"},[t._v("¥"+t._s(e.price))]),s("van-stepper",{attrs:{integer:""},on:{change:t.sumPriceEvent},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",s)},expression:"item.quantity"}})],1)])])})),s("van-cell",{attrs:{border:!1,title:"留言"}}),s("div",{staticClass:"plr-10"},[s("van-field",{attrs:{placeholder:"给卖家留言～～"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),s("div",{staticClass:"footer-bar"},[s("div",[s("span",{staticClass:"fz-15 c9"},[t._v("合计：")]),s("span",{staticClass:"fz-15 text-price"},[t._v("￥"+t._s(t.sumPrice))])]),s("div",{staticClass:"btn-youya",on:{click:t.submit}},[t._v("提交订单")])])],2)},a=[],i=(s("8e6e"),s("456d"),s("c5f6"),s("ade3")),n=(s("96cf"),s("1da1")),o=(s("ac6a"),s("18a0")),c=s.n(o);function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={components:{},props:{},data:function(){return{address:"",value:1,message:"",type:"",list:[],goods:[],order_id:"",sumPrice:0}},watch:{},computed:{},methods:{sumPriceEvent:function(){var t=0;this.list.length?(this.list.forEach((function(e){t=100*parseFloat(e.price)*e.quantity/100+t})),this.sumPrice=t):this.sumPrice=0},getGoods:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,s){var r,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"加载中..."}),t.next=3,axios.get("/mall/detail?id=".concat(e));case 3:r=t.sent,a=r.code,i=r.data,n=r.message,0==a?(this.$toast.clear(),this.list[s]=d(d({},this.list[s]),i),this.sumPriceEvent()):this.$toast.fail(n);case 8:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),getAddress:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/user/address-first");case 2:e=t.sent,s=e.code,r=e.data,e.message,0==s&&(this.address=r);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),submit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,r,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],this.list.forEach((function(t){e.push({goods_id:t.goods_id,quantity:t.quantity})})),this.$toast.loading({message:"提交中..."}),s={type:this.type,goods:JSON.stringify(e)},this.$route.query.share_id&&"undefined"!=this.$route.query.share_id&&(s.share_id=this.$route.query.share_id),2==s.type&&(s.address_id=this.address.id),t.next=8,axios.post("/user/mall-order",s);case 8:r=t.sent,a=r.code,i=r.data,n=r.message,0==a?(this.$toast.clear(),this.order_id=i.id,1==i.status?(this.$toast.success("支付成功"),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.pay(i.id)):this.$toast.fail(n||"下单失败，请联系客服！");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),payed:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"支付中..."}),t.next=3,axios.post("/user/mall-order/payed",{order_id:e});case 3:s=t.sent,r=s.code,a=s.data,i=s.message,0==r?(this.$toast.clear(),console.log(a),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.$toast.fail(i);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getSDK:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=encodeURIComponent(window.location.href),t.next=3,axios.get("/config/jsjdk?url="+e);case 3:s=t.sent,r=s.data,a=s.code,s.message,0==a&&c.a.config({debug:!1,appId:r.appId,timestamp:Number(r.timestamp),nonceStr:r.nonceStr,signature:r.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),pay:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,r,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/user/mall-order/pay?order_id="+e);case 2:s=t.sent,r=s.data,a=s.code,s.message,0==a&&c.a.chooseWXPay({appId:r.appId,timestamp:r.timeStamp,nonceStr:r.nonceStr,package:r.package,signType:r.signType,paySign:r.paySign,success:function(t){i.$toast.success("支付成功"),i.$router.push({name:"goods_pay_feedback",query:{order_id:i.order_id}})},fail:function(t){i.$toast.fail("支付失败")}});case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=this;console.log(this.$route.query),this.$route.query.list?this.list=JSON.parse(this.$route.query.list):this.list.push({goods_id:this.$route.query.goods_id,quantity:this.$route.query.quantity}),this.list.forEach((function(e,s){t.getGoods(e.goods_id,s)})),this.type=this.$route.query.type,this.getSDK(),2==this.type&&this.getAddress()},mounted:function(){}},p=l,f=(s("6a56"),s("2877")),h=Object(f["a"])(p,r,a,!1,null,"648008ac",null);e["default"]=h.exports},f1ae:function(t,e,s){"use strict";var r=s("86cc"),a=s("4630");t.exports=function(t,e,s){e in t?r.f(t,e,a(0,s)):t[e]=s}}}]);
//# sourceMappingURL=chunk-05529caa.d3b369e6.js.map