{"version":3,"sources":["webpack:///./src/views/verification/OrderDetail.vue?5208","webpack:///src/views/verification/OrderDetail.vue","webpack:///./src/views/verification/OrderDetail.vue?ec98","webpack:///./src/views/verification/OrderDetail.vue","webpack:///./src/views/verification/OrderDetail.vue?5662"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","detail","course_image","_v","_s","course_title","status","with_guest","nick_name","real_name","phone_contact","updated_at","id","on","verification","_e","produce","model","value","callback","$$v","isShowImg","expression","staticStyle","studentImg","close","staticRenderFns","width","height","backgroundColor","mc","background","component"],"mappings":"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","file":"js/chunk-a4ed1bd0.87c53d02.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{staticClass:\"order-list\"},[_c('li',{staticClass:\"order-item\"},[_c('div',{staticClass:\"flex flex-align-center mb-15\"},[_c('img',{staticClass:\"thumb\",attrs:{\"src\":_vm.detail.course_image,\"alt\":\"\"}}),_c('div',{staticClass:\"fz-15 c3 ml-10\"},[_vm._v(_vm._s(_vm.detail.course_title))])]),_c('div',{staticClass:\"bar-1 mb-10\"}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"text-price text-left\",\"title\":\"订单状态\",\"value\":_vm.detail.status == 0 ? '待核销':'已核销'}}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"c9 text-left\",\"title\":\"昵称\",\"value\":_vm.detail.with_guest.nick_name}}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"c9 text-left\",\"title\":\"姓名\",\"value\":_vm.detail.with_guest.real_name}}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"c9 text-left\",\"title\":\"手机号\",\"value\":_vm.detail.with_guest.phone_contact}}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"c9 text-left\",\"title\":\"订单编号\",\"value\":\"456788909867556\"}}),_c('van-cell',{attrs:{\"border\":false,\"title-class\":\"c9\",\"value-class\":\"c9 text-left\",\"title\":\"下单时间\",\"value\":_vm.detail.updated_at}}),_c('div',{staticClass:\"flex flex-end pt-10\"},[(_vm.detail.status == 0)?_c('div',{staticClass:\"btn-youya\",attrs:{\"data-id\":_vm.detail.id},on:{\"click\":_vm.verification}},[_vm._v(\"确认核销\")]):_vm._e(),_c('div',{staticClass:\"btn-youya-o ml-10\",on:{\"click\":_vm.produce}},[_vm._v(\"生成学员牌\")])])],1)]),_c('van-popup',{model:{value:(_vm.isShowImg),callback:function ($$v) {_vm.isShowImg=$$v},expression:\"isShowImg\"}},[_c('div',{staticClass:\"student-container\",staticStyle:{\"background-image\":\"url(../../img/bg-001.png)\"}},[_c('img',{attrs:{\"src\":_vm.studentImg,\"alt\":\"\"}}),_c('div',{staticClass:\"close\",on:{\"click\":_vm.close}},[_c('van-icon',{attrs:{\"name\":\"close\",\"size\":\"30px\"}})],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <ul class=\"order-list\">\n      <li class=\"order-item\">\n        <div class=\"flex flex-align-center mb-15\">\n          <img class=\"thumb\" :src=\"detail.course_image\" alt=\"\">\n          <div class=\"fz-15 c3 ml-10\">{{detail.course_title}}</div>\n        </div>\n        <div class=\"bar-1 mb-10\"></div>\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"text-price text-left\" title=\"订单状态\" :value=\"detail.status == 0 ? '待核销':'已核销'\" />\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"c9 text-left\" title=\"昵称\" :value=\"detail.with_guest.nick_name \" />\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"c9 text-left\" title=\"姓名\" :value=\"detail.with_guest.real_name\" />\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"c9 text-left\" title=\"手机号\" :value=\"detail.with_guest.phone_contact\" />\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"c9 text-left\" title=\"订单编号\" value=\"456788909867556\" />\n        <van-cell :border=\"false\" title-class=\"c9\" value-class=\"c9 text-left\" title=\"下单时间\" :value=\"detail.updated_at\" />\n        <div class=\"flex flex-end pt-10\">\n          <div v-if=\"detail.status == 0\" class=\"btn-youya\" :data-id=\"detail.id\" @click=\"verification\">确认核销</div>\n          <div @click=\"produce\" class=\"btn-youya-o ml-10\">生成学员牌</div>\n        </div>\n      </li>\n    </ul>\n    <van-popup v-model=\"isShowImg\">\n      <div class=\"student-container\" style=\"background-image: url(../../img/bg-001.png);\">\n        <img :src=\"studentImg\" alt=\"\">\n        <div class=\"close\" @click=\"close\">\n          <van-icon name=\"close\" size=\"30px\" />\n        </div>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport MCanvas,{MCrop} from 'mcanvas'\n  export default {\n    components: {},\n    props: {},\n    data() {\n      return {\n        isShowImg:false,\n        studentImg:\"\",\n        detail:{}\n      };\n    },\n    watch: {},\n    computed: {},\n    methods: {\n      close(){\n        this.isShowImg = false\n      },\n      produce(){\n        this.isShowImg = true\n        this.compoundImg(this.detail)\n      },\n      /**\n       * 生成学员牌\n       */\n      compoundImg(params) {\n        console.log(params)\n        new Promise((resolve,reject)=>{\n          MCrop(params.with_guest.avatar, {\n            // cropper shape\n            type: 'circle',\n            // crop by pos\n            x: 'center',\n            y: '0',\n            // radius\n            r: \"50%\",\n            // the success callback\n            success(b64) {\n                resolve(b64)\n            },\n          })\n        })\n        .then(avatar=>{\n        let mc = new MCanvas({\n          width: 690,\n          height: 834,\n          backgroundColor: 'white',\n        });\n        // 海报背景图 this.list[this.active].image ../img/poster-psd.jpg\n        mc.background(\"../../img/bg-001.png\", {\n            left: 0,\n            top: 0,\n            color: '#ffffff',\n            type: 'crop',\n          })\n          .rect({\n            x: 0,\n            y: 0,\n\n            // 矩形尺寸；\n            width: '100%',\n            height: '100%',\n\n            // 矩形填充颜色\n            fillColor: '#fff',\n          })\n          // 模板背景图连接\n          .add(\"../../img/bg-002.png\", {\n            width: 300,\n            height: 154,\n            pos: {\n              x: 197,\n              y: 400,\n              scale: 1\n            },\n          })\n          .add(\"../../img/logo-2.png\", {\n            width: 130,\n            height: 165,\n            pos: {\n              x: 280,\n              y: 90,\n              scale: 1\n            },\n          })\n          .circle({\n            // 圆形圆心位置，支持多种值；\n            // x: 250 / '250px' / '100%' / 'left:250' / 'center',\n            x: 260,\n            y: 400,\n\n            // 圆形半径； 100 / '100%' / '100px'\n            r: '85px',\n            // 圆形填充颜色\n            fillColor: '#ffffff',\n          })\n          // 用户头像 params.with_guest.avatar\n          .add(avatar, {\n            width: 164,\n            height: 164,\n            pos: {\n              x: 263,\n              y: 403,\n              scale: 1\n            }\n          })\n          // text 添加文字数据基础函数；\n          .text(params.course_title, {\n            width: 450,\n            align: 'center',\n            normalStyle: {\n              font: `30px Microsoft YaHei,sans-serif`,\n              lineHeight: 32,\n              color: '#333333',\n            },\n            pos: {\n              x: 120,\n              y: 288,\n            },\n          })\n          // text 添加文字数据基础函数；\n          .text('姓名', {\n            width: 70,\n            align: 'left',\n            normalStyle: {\n              font: `30px Microsoft YaHei,sans-serif`,\n              lineHeight: 32,\n              color: '#333333',\n            },\n            pos: {\n              x: 186,\n              y: 610,\n            },\n          })\n          // text 添加文字数据基础函数；\n          .text(params.with_guest.real_name || '王萌萌', {\n            width: 120,\n            align: 'left',\n            normalStyle: {\n              font: `30px Microsoft YaHei,sans-serif`,\n              lineHeight: 32,\n              color: '#333333',\n            },\n            pos: {\n              x: 350,\n              y: 610,\n            },\n          })\n          // text 添加文字数据基础函数；\n          .text('手机号', {\n            width: 120,\n            align: 'left',\n            normalStyle: {\n              font: `30px Microsoft YaHei,sans-serif`,\n              lineHeight: 32,\n              color: '#333333',\n            },\n            pos: {\n              x: 186,\n              y: 670,\n            },\n          })\n          // text 添加文字数据基础函数；\n          .text(params.with_guest.phone_contact||'13544445555', {\n            width: 250,\n            align: 'left',\n            normalStyle: {\n              font: `30px Microsoft YaHei,sans-serif`,\n              lineHeight: 32,\n              color: '#333333',\n            },\n            pos: {\n              x: 350,\n              y: 670,\n            },\n          })\n          .draw(b64 => {\n            // console.log(b64);\n            this.studentImg = b64\n          });\n        })\n      },\n      async getUserInfo(){\n        this.$toast.loading({message: '加载中...'});\n        let {code,data,message} = await axios.get(\"/user/off\");\n        if(code == 0){\n          this.$toast.clear()\n          this.getData()\n        }else if (code == 401){\n          this.$toast.fail(message)\n          setTimeout(()=>{\n            window.location.href = `http://youya.chuncom.com/user/off/authorization?code=${this.$route.query.code}&url_type=${this.$route.query.url_type}`\n          },2000)\n        }\n      },\n      async getData() {\n        this.$toast.loading({\n          message: \"加载中...\"\n        })\n        let {\n          code,\n          data,\n          messege\n        } = await axios.get(`/user/off/reservation-order/detail?code=${this.$route.query.code}`);\n        if (code == 0) {\n          this.$toast.clear()\n          this.detail = data\n        } else {\n          this.$toast.fail(message)\n        }\n      },\n      // 核销\n      async verification(e){\n        let {id} = e.currentTarget.dataset;\n         var b = await this.$dialog.confirm({\n          title: '提示',\n          message: '确认核销？'\n        }).then(() => {\n          return true;\n          // this.$router.push('/verification/feedback')\n        }).catch(() => {\n          return false;\n        });\n        if(b){\n          this.$toast.loading({message: '加载中...'});\n          let {code,data,message} = await axios.post(\"/user/off/reservation-order/off\",{\n            order_id:id\n          });\n          if(code == 0){\n            this.$toast.clear()\n            this.$router.push('/verification/feedback')\n\n          }else{\n            this.$toast.fail(message)\n          }\n        }\n      }\n    },\n    created() {\n      this.getUserInfo()\n    },\n    mounted() {}\n  };\n</script>\n<style lang=\"less\" scoped>\n  .order-list {\n    background-color: #f8f8f8;\n\n    .order-item {\n      margin-bottom: 10px;\n      padding: 15px;\n      background-color: #fff;\n\n      .thumb {\n        width: 100px;\n        height: 55px;\n        border-radius: 5px;\n      }\n    }\n  }\n  .student-container{\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100vw;\n    height: 100vh;\n    background-size: cover;\n    background-position: center;\n    >img{\n      width: 345px;\n      box-shadow:0px 0px 10px 0px rgba(238,238,238,1);\n    }\n    .close{\n      position: absolute;\n      top: 10px;\n      right: 10px;\n    }\n  }\n  .van-cell {\n    padding: 0 12px;\n  }\n\n  .van-cell__title {\n    flex: 0 1 80px;\n  }\n\n  .btn-youya,\n  .btn-youya-o {\n    width: 85px;\n    height: 26px;\n    line-height: 26px;\n    border-radius: 13px;\n    box-sizing: border-box;\n    text-align: center;\n    font-size: 13px;\n  }\n\n  .btn-youya {\n    color: #fff;\n    background: linear-gradient(143deg, rgba(157, 195, 230, 1) 0%, rgba(131, 179, 219, 1) 100%);\n  }\n\n  .btn-youya-o {\n    border: 1px solid #8DB9DF;\n    color: #8DB9DF;\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderDetail.vue?vue&type=template&id=968c6566&scoped=true&\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderDetail.vue?vue&type=style&index=0&id=968c6566&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"968c6566\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=style&index=0&id=968c6566&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=style&index=0&id=968c6566&lang=less&scoped=true&\""],"sourceRoot":""}